<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VoiceHub - Sesli Sohbet</title>
    <meta name="description"
        content="Hƒ±zlƒ± ve kolay sesli sohbet odalarƒ±. Kayƒ±t olmadan anƒ±nda sesli g√∂r√º≈üme ba≈ülatƒ±n.">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéôÔ∏è</text></svg>">
</head>

<body>
    <div class="app-container">
        <!-- Lobby Screen -->
        <div id="lobby-screen" class="screen active">
            <!-- Crosshair Pattern Background - Generated by JS -->
            <div id="crosshair-pattern" class="crosshair-pattern"></div>

            <!-- Language Selector - Page Level -->
            <div id="lang-selector" class="lang-selector">
                <button class="lang-btn" data-lang="tr" title="T√ºrk√ße">TR</button>
                <button class="lang-btn" data-lang="en" title="English">EN</button>
            </div>

            <div class="lobby-content">
                <div class="lobby-card">
                    <div class="brand">
                        <h1 class="brand-title">Voice<span>Hub</span></h1>
                        <p class="brand-tagline" data-i18n="lobby.tagline">Kayƒ±t yok. Reklam yok. Sadece ses.</p>
                    </div>

                    <div class="user-setup">
                        <div class="input-group">
                            <label for="username" data-i18n="lobby.username">Kullanƒ±cƒ± Adƒ±</label>
                            <input type="text" id="username" data-i18n-placeholder="lobby.usernamePlaceholder"
                                placeholder="Adƒ±nƒ±zƒ± girin..." maxlength="20" autocomplete="off">
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button id="create-room-btn" class="btn btn-primary">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10" />
                                <line x1="12" y1="8" x2="12" y2="16" />
                                <line x1="8" y1="12" x2="16" y2="12" />
                            </svg>
                            <span data-i18n="lobby.createRoom">Oda Olu≈ütur</span>
                        </button>
                        <button id="join-room-btn" class="btn btn-secondary">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round">
                                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4" />
                                <polyline points="10 17 15 12 10 7" />
                                <line x1="15" y1="12" x2="3" y2="12" />
                            </svg>
                            <span data-i18n="lobby.joinRoom">Odaya Katƒ±l</span>
                        </button>
                    </div>

                    <div id="join-room-section" class="join-section hidden">
                        <div class="input-group">
                            <label for="room-code" data-i18n="lobby.roomCode">Oda Kodu</label>
                            <input type="text" id="room-code" data-i18n-placeholder="lobby.roomCodePlaceholder"
                                placeholder="6 haneli kod..." maxlength="6" autocomplete="off"
                                style="text-transform: uppercase; letter-spacing: 2px;">
                        </div>
                        <button id="join-btn" class="btn btn-accent" data-i18n="lobby.join">Katƒ±l</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Room Screen -->
        <div id="room-screen" class="screen">
            <div class="room-header">
                <div class="room-info">
                    <div class="room-title-row">
                        <div class="room-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z" />
                                <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
                            </svg>
                        </div>
                        <div class="room-details">
                            <h2 id="room-name">Sesli Oda</h2>
                            <div class="room-code-display">
                                <span id="display-room-code">------</span>
                                <button id="copy-code-btn" class="icon-btn-sm" title="Kodu Kopyala">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="header-actions">
                    <div class="connection-status">
                        <div id="status-dot" class="status-dot connecting"></div>
                        <span id="status-text">Baƒülanƒ±yor...</span>
                    </div>
                    <button id="share-link-btn" class="icon-btn-action" title="Linki Payla≈ü">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" />
                            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" />
                        </svg>
                    </button>
                    <button id="password-btn" class="icon-btn-action" title="≈ûifre Ayarla">
                        <svg id="lock-open-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
                            <path d="M7 11V7a5 5 0 0 1 9.9-1" />
                        </svg>
                        <svg id="lock-closed-icon" class="hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
                            <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                        </svg>
                    </button>
                    <button id="settings-btn" class="icon-btn-action" data-i18n-title="room.settings" title="Ayarlar">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3" />
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" />
                        </svg>
                    </button>
                    <button id="leave-room-btn" class="icon-btn-danger" title="Odadan Ayrƒ±l">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                            <polyline points="16 17 21 12 16 7" />
                            <line x1="21" y1="12" x2="9" y2="12" />
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Main Layout: Content + Chat Sidebar -->
            <div class="room-main-layout">
                <!-- Left: Main Content -->
                <div class="room-content">
                    <div class="participants-container">
                        <h3>Katƒ±lƒ±mcƒ±lar</h3>
                        <div id="participants-list" class="participants-list">
                            <!-- Participants will be added here dynamically -->
                        </div>
                    </div>

                    <!-- Screen Share Video Container -->
                    <div id="screen-share-container" class="screen-share-container hidden">
                        <div class="screen-share-header">
                            <div class="screen-share-info">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="2" y="3" width="20" height="14" rx="2" ry="2" />
                                    <line x1="8" y1="21" x2="16" y2="21" />
                                    <line x1="12" y1="17" x2="12" y2="21" />
                                </svg>
                                <span id="screen-share-user">Ekran Payla≈üƒ±mƒ±</span>
                            </div>
                            <div class="screen-share-actions">
                                <button id="fullscreen-btn" class="icon-btn-sm" title="Tam Ekran">
                                    <svg id="fullscreen-enter-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3" />
                                    </svg>
                                    <svg id="fullscreen-exit-icon" class="hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3" />
                                    </svg>
                                </button>
                                <button id="close-screen-share" class="icon-btn-sm" title="Kapat">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <line x1="18" y1="6" x2="6" y2="18" />
                                        <line x1="6" y1="6" x2="18" y2="18" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <video id="screen-share-video" autoplay playsinline></video>
                    </div>
                </div>

                <!-- Right: Chat Sidebar -->
                <div class="chat-panel">
                    <div class="chat-header">
                        <h3>Sohbet</h3>
                        <span id="chat-badge" class="chat-badge hidden">0</span>
                    </div>
                    <div id="chat-messages" class="chat-messages">
                        <!-- Messages will be added here dynamically -->
                    </div>
                    <div class="chat-input-area">
                        <input type="file" id="file-input" class="hidden" multiple>
                        <button id="file-btn" class="icon-btn-sm" title="Dosya G√∂nder">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path
                                    d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48" />
                            </svg>
                        </button>
                        <input type="text" id="chat-input" placeholder="Mesaj yaz..." maxlength="500"
                            autocomplete="off">
                        <button id="send-btn" class="icon-btn-primary" title="G√∂nder">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="22" y1="2" x2="11" y2="13" />
                                <polygon points="22 2 15 22 11 13 2 9 22 2" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            <div class="controls-bar">
                <button id="mute-btn" class="control-btn" title="Mikrofonu Kapat/A√ß">
                    <svg id="mic-on-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z" />
                        <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
                        <line x1="12" y1="19" x2="12" y2="23" />
                        <line x1="8" y1="23" x2="16" y2="23" />
                    </svg>
                    <svg id="mic-off-icon" class="hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="1" y1="1" x2="23" y2="23" />
                        <path d="M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6" />
                        <path d="M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23" />
                        <line x1="12" y1="19" x2="12" y2="23" />
                        <line x1="8" y1="23" x2="16" y2="23" />
                    </svg>
                </button>
                <button id="screen-share-btn" class="control-btn" title="Ekran Payla≈ü">
                    <svg id="screen-share-off-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="2" y="3" width="20" height="14" rx="2" ry="2" />
                        <line x1="8" y1="21" x2="16" y2="21" />
                        <line x1="12" y1="17" x2="12" y2="21" />
                    </svg>
                    <svg id="screen-share-on-icon" class="hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="2" y="3" width="20" height="14" rx="2" ry="2" />
                        <line x1="8" y1="21" x2="16" y2="21" />
                        <line x1="12" y1="17" x2="12" y2="21" />
                        <line x1="9" y1="10" x2="15" y2="10" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Volume Control Modal -->
        <div id="volume-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="volume-user-name">Ses Seviyesi</h3>
                    <button id="close-volume-modal" class="icon-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <line x1="18" y1="6" x2="6" y2="18" />
                            <line x1="6" y1="6" x2="18" y2="18" />
                        </svg>
                    </button>
                </div>
                <div class="volume-control">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" />
                        <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07" />
                    </svg>
                    <input type="range" id="volume-slider" min="0" max="100" value="100">
                    <span id="volume-value">100%</span>
                </div>
            </div>
        </div>

        <!-- Password Set Modal (for host) -->
        <div id="password-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Oda ≈ûifresi</h3>
                    <button id="close-password-modal" class="icon-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18" />
                            <line x1="6" y1="6" x2="18" y2="18" />
                        </svg>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="input-group">
                        <label for="room-password">≈ûifre (bo≈ü bƒ±rakƒ±rsan ≈üifre kaldƒ±rƒ±lƒ±r)</label>
                        <input type="password" id="room-password" placeholder="≈ûifre girin..." maxlength="20"
                            autocomplete="new-password">
                    </div>
                    <button id="set-password-btn" class="btn btn-primary">≈ûifreyi Kaydet</button>
                </div>
            </div>
        </div>

        <!-- Password Enter Modal (for joining) -->
        <div id="enter-password-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>≈ûifre Gerekli</h3>
                    <button id="close-enter-password-modal" class="icon-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18" />
                            <line x1="6" y1="6" x2="18" y2="18" />
                        </svg>
                    </button>
                </div>
                <div class="modal-body">
                    <p class="modal-text">Bu oda ≈üifre korumalƒ±. L√ºtfen ≈üifreyi girin.</p>
                    <div class="input-group">
                        <label for="enter-room-password">≈ûifre</label>
                        <input type="password" id="enter-room-password" placeholder="≈ûifre girin..." maxlength="20"
                            autocomplete="current-password">
                    </div>
                    <button id="submit-password-btn" class="btn btn-primary">Katƒ±l</button>
                </div>
            </div>
        </div>

        <!-- Username Prompt Modal (for URL join) -->
        <div id="username-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Odaya Katƒ±l</h3>
                </div>
                <div class="modal-body">
                    <p class="modal-text">Odaya katƒ±lmak i√ßin kullanƒ±cƒ± adƒ±nƒ±zƒ± girin.</p>
                    <div class="input-group">
                        <label for="prompt-username">Kullanƒ±cƒ± Adƒ±</label>
                        <input type="text" id="prompt-username" placeholder="Adƒ±nƒ±zƒ± girin..." maxlength="20"
                            autocomplete="name">
                    </div>
                    <button id="prompt-username-btn" class="btn btn-primary">Katƒ±l</button>
                </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settings-modal" class="modal hidden">
            <div class="modal-content modal-content-lg">
                <div class="modal-header">
                    <h3 data-i18n="settings.title">Ses Ayarlarƒ±</h3>
                    <button id="close-settings-modal" class="icon-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18" />
                            <line x1="6" y1="6" x2="18" y2="18" />
                        </svg>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Noise Suppression Section -->
                    <div class="settings-section">
                        <h4 data-i18n="settings.noiseSuppression">G√ºr√ºlt√º Engelleme</h4>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <label for="noise-suppression-toggle" data-i18n="settings.autoNoiseSuppression">Otomatik G√ºr√ºlt√º Engelleme</label>
                                <span class="setting-desc" data-i18n="settings.autoNoiseSuppressionDesc">Tarayƒ±cƒ±nƒ±n yerle≈üik g√ºr√ºlt√º engelleme √∂zelliƒüini kullanƒ±r</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="noise-suppression-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <label for="noise-gate-toggle" data-i18n="settings.noiseGate">Ses Kapƒ±sƒ± (Noise Gate)</label>
                                <span class="setting-desc" data-i18n="settings.noiseGateDesc">Belirli seviyenin altƒ±ndaki sesleri engeller</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="noise-gate-toggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div id="noise-gate-settings" class="sub-settings hidden">
                            <div class="setting-item">
                                <div class="setting-info">
                                    <label for="noise-threshold" data-i18n="settings.noiseThreshold">E≈üik Seviyesi</label>
                                    <span class="setting-desc" data-i18n="settings.noiseThresholdDesc">Bu seviyenin altƒ±ndaki sesler engellenecek</span>
                                </div>
                                <div class="range-control">
                                    <input type="range" id="noise-threshold" min="0" max="100" value="15">
                                    <span id="noise-threshold-value">15</span>
                                </div>
                            </div>
                            
                            <div class="mic-level-container">
                                <label data-i18n="settings.micLevel">Mikrofon Seviyesi</label>
                                <div class="mic-level-bar">
                                    <div id="mic-level-indicator" class="mic-level-indicator"></div>
                                    <div id="noise-threshold-line" class="noise-threshold-line" style="left: 15%"></div>
                                </div>
                                <div class="mic-level-labels">
                                    <span>0</span>
                                    <span>50</span>
                                    <span>100</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Echo Cancellation Section -->
                    <div class="settings-section">
                        <h4 data-i18n="settings.echoCancellation">Eko Engelleme</h4>
                        <div class="setting-item">
                            <div class="setting-info">
                                <label for="echo-cancellation-toggle" data-i18n="settings.autoEchoCancellation">Otomatik Eko Engelleme</label>
                                <span class="setting-desc" data-i18n="settings.autoEchoCancellationDesc">Hoparl√∂rden gelen sesin mikrofona geri d√∂nmesini engeller</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="echo-cancellation-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>

                    <!-- Auto Gain Control Section -->
                    <div class="settings-section">
                        <h4 data-i18n="settings.autoGain">Otomatik Ses Ayarƒ±</h4>
                        <div class="setting-item">
                            <div class="setting-info">
                                <label for="auto-gain-toggle" data-i18n="settings.autoGainControl">Otomatik Ses Seviyesi</label>
                                <span class="setting-desc" data-i18n="settings.autoGainControlDesc">Mikrofon ses seviyesini otomatik olarak ayarlar</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="auto-gain-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Toast Notification -->
        <div id="toast" class="toast hidden">
            <span id="toast-message"></span>
        </div>
    </div>

    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script src="i18n.js"></script>
    <script src="app.js"></script>
</body>

</html>